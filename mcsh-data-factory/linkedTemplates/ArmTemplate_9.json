{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"factoryName": {
			"type": "string",
			"metadata": "Data Factory name",
			"defaultValue": "mcsh-data-factory"
		},
		"Daily Morning_properties_AG_MainDB_to_Raw_parameters_main_directory": {
			"type": "string",
			"defaultValue": "ag_dwh_sink"
		},
		"Daily Morning_properties_AG_Order_1d_Ago_Extract_CSV_parameters_windowStart": {
			"type": "string",
			"defaultValue": "@{addhours(trigger().scheduledTime, -24)}"
		},
		"Daily Morning_properties_AG_Order_1d_Ago_Extract_CSV_parameters_windowEnd": {
			"type": "string",
			"defaultValue": "@trigger().scheduledTime"
		},
		"Daily Morning_properties_CC_MainDB_to_Raw_parameters_main_directory": {
			"type": "string",
			"defaultValue": "cc_dwh_sink"
		},
		"Daily Morning_properties_TD_MainDB_to_Raw_parameters_main_directory": {
			"type": "string",
			"defaultValue": "td_dwh_sink"
		},
		"Daily Morning_properties_CC_Small_Tables_Full_Extract_parameters_main_directory": {
			"type": "string",
			"defaultValue": "cc_dwh_sink"
		},
		"Daily Morning_properties_TD_Customer_Full_Flow_parameters_src_customer_table": {
			"type": "string",
			"defaultValue": "BigOneFullCustomers_D"
		},
		"Daily Morning_properties_TD_Customer_Full_Flow_parameters_src_tradeshop_gps_table": {
			"type": "string",
			"defaultValue": "TradeshopGPS_TD"
		},
		"Daily Morning_properties_TD_Customer_Full_Flow_parameters_dest_folder": {
			"type": "string",
			"defaultValue": "td_dwh_sink"
		},
		"Daily Morning_properties_TD_Customer_Full_Flow_parameters_dest_customer_file": {
			"type": "string",
			"defaultValue": "td_dwh_full_customer.csv"
		},
		"Daily Morning_properties_TD_Customer_Full_Flow_parameters_dest_gps_file": {
			"type": "string",
			"defaultValue": "td_dwh_full_trade_shop_gps.csv"
		},
		"Daily Morning_properties_AG_Customer_Full_Flow_SQL_parameters_src_customer_table": {
			"type": "string",
			"defaultValue": "BigOneFullCustomers"
		},
		"Daily Morning_properties_AG_Customer_Full_Flow_SQL_parameters_src_tradeshop_gps_table": {
			"type": "string",
			"defaultValue": "TradeshopGPS_AG"
		},
		"Daily Morning_properties_AG_Customer_Full_Flow_SQL_parameters_dest_folder": {
			"type": "string",
			"defaultValue": "ag_dwh_sink"
		},
		"Daily Morning_properties_AG_Customer_Full_Flow_SQL_parameters_dest_customer_file": {
			"type": "string",
			"defaultValue": "ag_dwh_full_customer.csv"
		},
		"Daily Morning_properties_AG_Customer_Full_Flow_SQL_parameters_dest_gps_file": {
			"type": "string",
			"defaultValue": "ag_dwh_full_trade_shop_gps.csv"
		},
		"NightTrigger_properties_pl_evs_allemployee_UpsertTrigger_parameters_windowStart": {
			"type": "string",
			"defaultValue": "utcNow()"
		},
		"NightTrigger_properties_pl_evs_allemployee_UpsertTrigger_parameters_windowEnd": {
			"type": "string",
			"defaultValue": "addMinutes(utcNow(), 35)"
		},
		"Trigger_qd9_properties_GreenERP_HREmployee_parameters_windowStart": {
			"type": "string",
			"defaultValue": "@{addhours(trigger().scheduledTime, -24)}"
		},
		"Trigger_qd9_properties_GreenERP_HREmployee_parameters_windowEnd": {
			"type": "string",
			"defaultValue": "@trigger().scheduledTime"
		}
	},
	"variables": {
		"factoryId": "[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"
	},
	"resources": [
		{
			"name": "[concat(parameters('factoryName'), '/Daily Morning')]",
			"type": "Microsoft.DataFactory/factories/triggers",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"runtimeState": "Started",
				"pipelines": [
					{
						"pipelineReference": {
							"referenceName": "AG_Small_Tables_Full_Extract",
							"type": "PipelineReference"
						},
						"parameters": {}
					},
					{
						"pipelineReference": {
							"referenceName": "AG_MainDB_to_Raw",
							"type": "PipelineReference"
						},
						"parameters": {
							"main_directory": "[parameters('Daily Morning_properties_AG_MainDB_to_Raw_parameters_main_directory')]"
						}
					},
					{
						"pipelineReference": {
							"referenceName": "AG_Customer_Full_Flow",
							"type": "PipelineReference"
						},
						"parameters": {}
					},
					{
						"pipelineReference": {
							"referenceName": "AG_Order_1d_Ago_Extract_CSV",
							"type": "PipelineReference"
						},
						"parameters": {
							"windowStart": "[parameters('Daily Morning_properties_AG_Order_1d_Ago_Extract_CSV_parameters_windowStart')]",
							"windowEnd": "[parameters('Daily Morning_properties_AG_Order_1d_Ago_Extract_CSV_parameters_windowEnd')]"
						}
					},
					{
						"pipelineReference": {
							"referenceName": "CC_Customer_Full_Flow",
							"type": "PipelineReference"
						},
						"parameters": {}
					},
					{
						"pipelineReference": {
							"referenceName": "TD_Small_Tables_Full_Extract",
							"type": "PipelineReference"
						},
						"parameters": {}
					},
					{
						"pipelineReference": {
							"referenceName": "CC_MainDB_to_Raw",
							"type": "PipelineReference"
						},
						"parameters": {
							"main_directory": "[parameters('Daily Morning_properties_CC_MainDB_to_Raw_parameters_main_directory')]"
						}
					},
					{
						"pipelineReference": {
							"referenceName": "TD_MainDB_to_Raw",
							"type": "PipelineReference"
						},
						"parameters": {
							"main_directory": "[parameters('Daily Morning_properties_TD_MainDB_to_Raw_parameters_main_directory')]"
						}
					},
					{
						"pipelineReference": {
							"referenceName": "CC_Small_Tables_Full_Extract",
							"type": "PipelineReference"
						},
						"parameters": {
							"main_directory": "[parameters('Daily Morning_properties_CC_Small_Tables_Full_Extract_parameters_main_directory')]"
						}
					},
					{
						"pipelineReference": {
							"referenceName": "TD_Customer_Full_Flow",
							"type": "PipelineReference"
						},
						"parameters": {
							"src_customer_table": "[parameters('Daily Morning_properties_TD_Customer_Full_Flow_parameters_src_customer_table')]",
							"src_tradeshop_gps_table": "[parameters('Daily Morning_properties_TD_Customer_Full_Flow_parameters_src_tradeshop_gps_table')]",
							"dest_folder": "[parameters('Daily Morning_properties_TD_Customer_Full_Flow_parameters_dest_folder')]",
							"dest_customer_file": "[parameters('Daily Morning_properties_TD_Customer_Full_Flow_parameters_dest_customer_file')]",
							"dest_gps_file": "[parameters('Daily Morning_properties_TD_Customer_Full_Flow_parameters_dest_gps_file')]"
						}
					},
					{
						"pipelineReference": {
							"referenceName": "AG_Customer_Full_Flow_SQL",
							"type": "PipelineReference"
						},
						"parameters": {
							"src_customer_table": "[parameters('Daily Morning_properties_AG_Customer_Full_Flow_SQL_parameters_src_customer_table')]",
							"src_tradeshop_gps_table": "[parameters('Daily Morning_properties_AG_Customer_Full_Flow_SQL_parameters_src_tradeshop_gps_table')]",
							"dest_folder": "[parameters('Daily Morning_properties_AG_Customer_Full_Flow_SQL_parameters_dest_folder')]",
							"dest_customer_file": "[parameters('Daily Morning_properties_AG_Customer_Full_Flow_SQL_parameters_dest_customer_file')]",
							"dest_gps_file": "[parameters('Daily Morning_properties_AG_Customer_Full_Flow_SQL_parameters_dest_gps_file')]"
						}
					}
				],
				"type": "ScheduleTrigger",
				"typeProperties": {
					"recurrence": {
						"frequency": "Day",
						"interval": 1,
						"startTime": "2024-11-28T05:00:00",
						"timeZone": "Ulaanbaatar Standard Time"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/NightTrigger')]",
			"type": "Microsoft.DataFactory/factories/triggers",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"runtimeState": "Started",
				"pipelines": [
					{
						"pipelineReference": {
							"referenceName": "pl_evs_allemployee_UpsertTrigger",
							"type": "PipelineReference"
						},
						"parameters": {
							"windowStart": "[parameters('NightTrigger_properties_pl_evs_allemployee_UpsertTrigger_parameters_windowStart')]",
							"windowEnd": "[parameters('NightTrigger_properties_pl_evs_allemployee_UpsertTrigger_parameters_windowEnd')]"
						}
					}
				],
				"type": "ScheduleTrigger",
				"typeProperties": {
					"recurrence": {
						"frequency": "Hour",
						"interval": 24,
						"startTime": "2025-11-27T01:40:00",
						"timeZone": "Ulaanbaatar Standard Time"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Trigger_394')]",
			"type": "Microsoft.DataFactory/factories/triggers",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"runtimeState": "Stopped",
				"pipelines": [
					{
						"pipelineReference": {
							"referenceName": "CopyPipeline_Qreports",
							"type": "PipelineReference"
						},
						"parameters": {}
					}
				],
				"type": "ScheduleTrigger",
				"typeProperties": {
					"recurrence": {
						"frequency": "Hour",
						"interval": 24,
						"startTime": "2025-12-11T01:31:00Z",
						"timeZone": "UTC"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Trigger_qd9')]",
			"type": "Microsoft.DataFactory/factories/triggers",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"runtimeState": "Started",
				"pipelines": [
					{
						"pipelineReference": {
							"referenceName": "GreenERP_HREmployee",
							"type": "PipelineReference"
						},
						"parameters": {
							"windowStart": "[parameters('Trigger_qd9_properties_GreenERP_HREmployee_parameters_windowStart')]",
							"windowEnd": "[parameters('Trigger_qd9_properties_GreenERP_HREmployee_parameters_windowEnd')]"
						}
					}
				],
				"type": "ScheduleTrigger",
				"typeProperties": {
					"recurrence": {
						"frequency": "Hour",
						"interval": 24,
						"startTime": "2025-11-10T02:00:00Z",
						"timeZone": "UTC"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Trigger_xii')]",
			"type": "Microsoft.DataFactory/factories/triggers",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"runtimeState": "Started",
				"pipelines": [
					{
						"pipelineReference": {
							"referenceName": "CopyPipeline_xii",
							"type": "PipelineReference"
						},
						"parameters": {}
					}
				],
				"type": "ScheduleTrigger",
				"typeProperties": {
					"recurrence": {
						"frequency": "Hour",
						"interval": 24,
						"startTime": "2025-11-21T14:57:00Z",
						"timeZone": "UTC"
					}
				}
			},
			"dependsOn": []
		}
	]
}